{
    // C/C++ Configuration
    "C_Cpp.intelliSenseEngine": "disabled",
    "C_Cpp.autocomplete": "disabled",
    "C_Cpp.errorSquiggles": "disabled",
    // clangd Configuration
    "clangd.arguments": [
        "--background-index",
        "--clang-tidy",
        "--header-insertion=iwyu",
        "--completion-style=detailed",
        "--function-arg-placeholders",
        "--fallback-style=llvm",
        "--all-scopes-completion",
        "--cross-file-rename",
        "--log=verbose",
        "--pretty"
    ],
    "clangd.checkUpdates": true,
    "cppcheck-official.enable": true,
    "cppcheck-official.path": "/usr/bin/cppcheck",
    "cppcheck-official.minSeverity": "info",
    "cppcheck-official.arguments": "--language=c++ --std=c++23 --inline-suppr --suppress=missingIncludeSystem",
    // Format on Save
    "editor.formatOnSave": true,
    "editor.formatOnType": false,
    "editor.formatOnPaste": false,
    // Default formatter for C/C++
    "[cpp]": {
        "editor.defaultFormatter": "llvm-vs-code-extensions.vscode-clangd",
        "editor.formatOnSave": true
    },
    "[c]": {
        "editor.defaultFormatter": "llvm-vs-code-extensions.vscode-clangd",
        "editor.formatOnSave": true
    },
    // File associations
    "files.associations": {
        "*.h": "c",
        "*.hpp": "cpp",
        "*.cpp": "cpp",
        "*.c": "c"
    },
    // CMake Configuration
    "cmake.configureOnOpen": true,
    "cmake.buildDirectory": "${workspaceFolder}/build",
    "cmake.copyCompileCommands": "${workspaceFolder}/build/compile_commands.json",
    // Editor settings
    "editor.tabSize": 4,
    "editor.insertSpaces": true,
    "editor.rulers": [
        100
    ],
    "editor.wordWrap": "off",
    // Files settings
    "files.trimTrailingWhitespace": true,
    "files.insertFinalNewline": true,
    "files.trimFinalNewlines": true,
    // Run clang-tidy/cppcheck on save (optional; disabled to avoid duplicate diagnostics)
    "emeraldwalk.runonsave": {
        "commands": [
            // {
            //     "match": "\\.(c|cc|cpp)$",
            //     "cmd": "clang-tidy -p build ${file}"
            // },
            // {
            //     "match": "\\.(c|cc|cpp|h|hpp|tpp)$",
            //     "cmd": "cppcheck --project=build/compile_commands.json --enable=warning,style,performance,portability --inline-suppr --suppress=missingIncludeSystem --relative-paths --template='{file}:{line}:{column}: warning: [cppcheck/{severity}] {message}' --file-filter=${file}"
            // }
        ]
    },
    // Terminal
    "terminal.integrated.env.linux": {
        "ASAN_OPTIONS": "detect_leaks=1:symbolize=1",
        "UBSAN_OPTIONS": "print_stacktrace=1"
    }
}
